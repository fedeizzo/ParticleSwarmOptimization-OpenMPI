<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSO - OpenMPI, OpenMP: Benchmarking</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js", "Tex/Algorithm.sty.js", "Tex/Pseudocode.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
    processEscapes: true
  }
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PSO - OpenMPI, OpenMP
   </div>
   <div id="projectbrief">A cooperant parallelized solution for Genetic Algorithm</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_report_03_Benchmarking.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Benchmarking </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >After implementing the algorithm, we wanted to understand how our parallelization impacts the performance of the algorithm.</p>
<p >Hence, we devised a full analysis of our algorithm performance changing the number of threads, the number of processes and the pBS process allocation pattern, in order to understand how the running time would have been affected.</p>
<h1><a class="anchor" id="autotoc_md39"></a>
Problem configuration</h1>
<p >In order to understand how our parallelization improved the running time, we devised a configuration file which is the same for every run, so as to have a common baseline.</p>
<p >The configuration is listed below:</p>
<div class="fragment"><div class="line">[global]</div>
<div class="line">problemDimension = 50</div>
<div class="line">particlesNumber = 5000</div>
<div class="line">iterationsNumber = 500</div>
<div class="line">neighborhoodPopulation = 5000</div>
<div class="line"> </div>
<div class="line">[velocity]</div>
<div class="line">w = 0.8</div>
<div class="line">phi_1 = 0.3 </div>
<div class="line">phi_2 = 0.3</div>
<div class="line"> </div>
<div class="line">[randomBounds]</div>
<div class="line">initMaxPosition = 500.0</div>
<div class="line">initMinPosition = -500.0</div>
<div class="line">initMaxVelocity = 100.0</div>
<div class="line">initMinVelocity = -100.0</div>
<div class="line"> </div>
<div class="line">[functions]</div>
<div class="line">fitness = sphere</div>
<div class="line">distance = euclidean</div>
<div class="line">fitnessGoal = minimum</div>
</div><!-- fragment --><p >The amount of particles and the neighboord population are unreasonable for any known problem but they were chosen to show clearly the advantages brought by a multi process solution.</p>
<h1><a class="anchor" id="autotoc_md40"></a>
Cluster jobs</h1>
<p >In order to have high-quality and trustworthy results to examine, as indicated in the repository structure, we created a script that allowed us to send thousands of tasks to the University's HPC cluster over the course of many days. The script keeps a limit on the user current submitted job in order to do not monopolize the cluster and comply with the cluster policies. Precisely, we have set a $15$ process limit and every $10$ seconds the script checks whether the user has $15$ or more running processes in the cluster. If it is the case, then the script waits, otherwise it submits a new job to the scheduler.</p>
<p >The total number of tests we have ran in total is around around 960, in particular we tried every possible combinations of different parameters:</p>
<ul>
<li>processes: chosen between <code>[1 2 4 8 16 32 64]</code></li>
<li>threads: chosen between <code>[1 2 4 8 16 32 64]</code></li>
<li>select: chosen between <code>[1 2 3 4 5]</code></li>
<li>places: chosen between <code>[pack scatter pack:excl scatter:excl]</code> TODO: spiegare select and places</li>
</ul>
<p >select equivale al numero di chunk (un chunk un insieme core/socket non necessariamente sulla stessa macchina). ncpus e' il numero di core che voglio per ogni chunk. pack mette tutti i chunk sulla stessa macchina, scatter li divide su macchine diverse SEMPRE mentre le versioni excl riservano gli interi ?nodi/chunk? alla tua creazione</p>
<p >We decided to increase the processes and threads number by power of 2 because the most complex algorithm (following the asymptotic notation) should be $\mathcal{O}(nlogn)$ (TODO verificare questa complessita')</p>
<p >Since it takes 50 minutes on average for each run, we had to stretch out the submission of jobs across many days (two weeks).</p>
<h1><a class="anchor" id="autotoc_md41"></a>
Results</h1>
<p >During the execution of the bencmarking phase two problems occured:</p>
<ul>
<li>one student saturates the available space in the home of the cluster and for this reason some of our runs were not able to write results on disk at the end of the execution;</li>
<li>we decided to sumbit all jobs to the short job queue of the cluster, and some jobs failed for <em>time exceed</em> error or missing resources.</li>
</ul>
<p >All configurations were launched by both of them in order to validate results and reduce possible noise. In Table 1 it is presented the amount of jobs and the associated fail rate (it is shown only the amount of cores for presentation reasons)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Processes number   </th><th class="markdownTableHeadNone">Total   </th><th class="markdownTableHeadNone">Failed   </th><th class="markdownTableHeadNone">Fail rate    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">110   </td><td class="markdownTableBodyNone">18   </td><td class="markdownTableBodyNone">16.36    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">109   </td><td class="markdownTableBodyNone">51   </td><td class="markdownTableBodyNone">46.79    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">104   </td><td class="markdownTableBodyNone">52   </td><td class="markdownTableBodyNone">50.00    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">8   </td><td class="markdownTableBodyNone">105   </td><td class="markdownTableBodyNone">59   </td><td class="markdownTableBodyNone">56.19    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">16   </td><td class="markdownTableBodyNone">105   </td><td class="markdownTableBodyNone">64   </td><td class="markdownTableBodyNone">60.95    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">32   </td><td class="markdownTableBodyNone">91   </td><td class="markdownTableBodyNone">63   </td><td class="markdownTableBodyNone">69.23    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">64   </td><td class="markdownTableBodyNone">56   </td><td class="markdownTableBodyNone">43   </td><td class="markdownTableBodyNone">76.79   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
